/*!wipe-hyl1.0.0 发布日期:2018-11-12*/
var canvas=document.getElementById("cas"),context=canvas.getContext("2d"),_w=canvas.width,_h=canvas.height,radius=20,moveX=0,moveY=0,isMouseDown=!1;function drawMask(e){e.fillStyle="#666",e.fillRect(0,0,_w,_h),e.globalCompositeOperation="destination-out"}function draePoint(e,n,t){e.save(),e.beginPath(),e.arc(n,t,radius,0,2*Math.PI),e.fillStyle="rgb(242,103,91)",e.fill(),e.restore()}function drawLine(e,n,t,o,a){e.save(),e.lineCap="round",e.beginPath(),e.moveTo(n,t),e.lineTo(o,a),e.lineWidth=2*radius,e.stroke(),e.restore()}canvas.addEventListener("mousedown",function(e){var n=e||window.event;moveX=n.clientX,moveY=n.clientY,draePoint(context,moveX,moveY),isMouseDown=!0},!1),canvas.addEventListener("mousemove",function(e){if(!isMouseDown)return!1;var n=e||window.event,t=n.clientX,o=n.clientY;drawLine(context,moveX,moveY,t,o),moveX=t,moveY=o},!1),canvas.addEventListener("mouseup",function(){t=0,isMouseDown=!1,50<getTransparency(context)&&grawClear(context)},!1);var t=0;function getTransparency(e){for(var n=e.getImageData(0,0,_w,_h),o=0;o<n.data.length;o+=4){0===n.data[o+3]&&t++}return console.log("透明点的个数："+t),console.log("占总面积："+(t/(_w*_h)*100).toFixed(2)+"%"),(t/(_w*_h)*100).toFixed(2)}function grawClear(e){e.clearRect(0,0,_w,_h)}window.onload=function(){drawMask(context)};